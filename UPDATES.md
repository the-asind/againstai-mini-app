# История Обновлений

## 2026-03-01 - Оптимизация ИИ и Фиксы Анимаций
- Оптимизирован `geminiService`: генерация сценария и персональных секретов объединены в **один LLM-запрос** (merged `SECRET_GENERATOR` into `SCENARIO_GENERATOR`). Это ускоряет загрузку и улучшает консистентность лора.
- Добавлен компонент настоящей "печатной машинки" в `MarkdownDisplay.tsx`. Теперь тексты от ИИ плавно печатаются на экране.
- Исправлена логика фазы `PLAYER_INPUT` в `App.tsx`: анимация текста проигрывается до конца, после чего (если есть секрет) игроку выводится модалка с "Входящим сообщением", и только после прочтения секрета открывается поле ввода.

## 2026-02-28 - Асимметричный геймплей и Интерактивные экраны загрузки
- Введена фаза `SCENARIO_GENERATION` с мини-играми `InteractiveLoadingScreen` (Колесо выбора, голосование "Кто скорее всего..."), скрывающая 10-20 секундную генерацию нейросетей.
- Внедрены Персональные ИИ-Секреты (`GeminiService.generateSecrets`, `SecretModal.tsx`). У игроков могут появиться роли "предатель", "шпион" и другие подлянки, которые судятся в конце раунда.
- Подключена генерация Изображений и Голоса (TTS) для создания более насыщенных итогов и лора в каждом раунде.
- Разделена отдача состояний в сокетах (`emitSecrets` шлет секреты приватно, `emitUpdate` отдает публичный `GameState` без API ключей).